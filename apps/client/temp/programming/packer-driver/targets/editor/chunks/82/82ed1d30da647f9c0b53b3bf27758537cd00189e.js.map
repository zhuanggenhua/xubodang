{"version":3,"sources":["file:///C:/Users/Admin/Desktop/zgh-temp/test/gtest/ctest/xubodang/apps/client/assets/scripts/scene/HomeMgr.ts"],"names":["_decorator","Component","Node","ParticleMgr","LightParticle","ccclass","property","blinkInterval","HomeMgr","particleMgr","onLoad","canvas","addComponent","init","gap","node","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","onDestroy","clear","off","event","touch","gather","getLocation","adsorb","offGather","start","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACEA,MAAAA,U,OAAAA,U;AAEAC,MAAAA,S,OAAAA,S;AAKAC,MAAAA,I,OAAAA,I;;AAOKC,MAAAA,W;;AACEC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAExBO,MAAAA,a,GAAgB,C,EAAE;;yBAGXC,O,WADZH,OAAO,CAAC,SAAD,C,UAELC,QAAQ,CAACJ,IAAD,C,UAERI,QAAQ,CAACJ,IAAD,C,2BAJX,MACaM,OADb,SAC6BP,SAD7B,CACuC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAMrCQ,WANqC;AAAA;;AAQrCC,QAAAA,MAAM,GAAG;AACP,eAAKD,WAAL,GAAmB,KAAKE,MAAL,CAAYC,YAAZ;AAAA;AAAA,yCAAnB;AACA,eAAKH,WAAL,CAAiBI,IAAjB;AAAA;AAAA,8CAAqC;AACnCC,YAAAA,GAAG,EAAE,GAD8B,CAEnC;;AAFmC,WAArC;AAKA,eAAKC,IAAL,CAAUC,EAAV,CAAad,IAAI,CAACe,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAad,IAAI,CAACe,SAAL,CAAeG,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAad,IAAI,CAACe,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,UAA5C,EAAwD,IAAxD;AACD;;AACDC,QAAAA,SAAS,GAAG;AACV,eAAKf,WAAL,CAAiBgB,KAAjB;AACA,eAAKV,IAAL,CAAUW,GAAV,CAAcxB,IAAI,CAACe,SAAL,CAAeC,WAA7B,EAA0C,KAAKC,YAA/C,EAA6D,IAA7D;AACA,eAAKJ,IAAL,CAAUW,GAAV,CAAcxB,IAAI,CAACe,SAAL,CAAeG,UAA7B,EAAyC,KAAKC,WAA9C,EAA2D,IAA3D;AACA,eAAKN,IAAL,CAAUW,GAAV,CAAcxB,IAAI,CAACe,SAAL,CAAeK,SAA7B,EAAwC,KAAKC,UAA7C,EAAyD,IAAzD;AACD;;AAEDJ,QAAAA,YAAY,CAACQ,KAAD,EAAoB;AAC9B;AACA,gBAAMC,KAAK,GAAGD,KAAK,CAACC,KAApB;AACA,eAAKnB,WAAL,CAAiBoB,MAAjB,CAAwBD,KAAK,CAACE,WAAN,EAAxB;AACD;;AACDT,QAAAA,WAAW,CAACM,KAAD,EAAoB;AAC7B;AACA,gBAAMC,KAAK,GAAGD,KAAK,CAACC,KAApB;AACA,eAAKnB,WAAL,CAAiBsB,MAAjB,CAAwBH,KAAK,CAACE,WAAN,EAAxB;AACD;;AACDP,QAAAA,UAAU,GAAG;AACX,eAAKd,WAAL,CAAiBuB,SAAjB;AACD;;AAEDC,QAAAA,KAAK,GAAG,CAAE;;AAEVC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACxB,eAAK1B,WAAL,CAAiByB,MAAjB,CAAwBC,SAAxB;AACD;;AA5CoC,O;;;;;iBAEtB,I;;;;;;;iBAEJ,I","sourcesContent":["import {\r\n  _decorator,\r\n  Color,\r\n  Component,\r\n  EventTouch,\r\n  GradientRange,\r\n  Graphics,\r\n  instantiate,\r\n  Node,\r\n  ParticleSystem2D,\r\n  Prefab,\r\n  tween,\r\n} from 'cc'\r\nimport { mapH, mapW } from '../global/DataManager'\r\nimport { getRandomNumber } from '../utils/tool'\r\nimport ParticleMgr from '../particle/ParticleMgr'\r\nimport { LightParticle } from '../particle/LightParticle'\r\nconst { ccclass, property } = _decorator\r\n\r\nconst blinkInterval = 1 // 闪烁间隔时间（秒）\r\n\r\n@ccclass('HomeMgr')\r\nexport class HomeMgr extends Component {\r\n  @property(Node)\r\n  canvas: Node = null\r\n  @property(Node)\r\n  bg: Node = null\r\n\r\n  particleMgr: ParticleMgr\r\n\r\n  onLoad() {\r\n    this.particleMgr = this.canvas.addComponent(ParticleMgr)\r\n    this.particleMgr.init(LightParticle, {\r\n      gap: 0.5,\r\n      // max: 1,\r\n    })\r\n\r\n    this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n    this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n    this.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n  }\r\n  onDestroy() {\r\n    this.particleMgr.clear()\r\n    this.node.off(Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n    this.node.off(Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n    this.node.off(Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n  }\r\n\r\n  onTouchStart(event: EventTouch) {\r\n    // 辉光聚拢效果\r\n    const touch = event.touch\r\n    this.particleMgr.gather(touch.getLocation())\r\n  }\r\n  onTouchMove(event: EventTouch) {\r\n    // 辉光聚拢效果\r\n    const touch = event.touch\r\n    this.particleMgr.adsorb(touch.getLocation())\r\n  }\r\n  onTouchEnd() {\r\n    this.particleMgr.offGather()\r\n  }\r\n\r\n  start() {}\r\n\r\n  update(deltaTime: number) {\r\n    this.particleMgr.update(deltaTime)\r\n  }\r\n}\r\n"]}