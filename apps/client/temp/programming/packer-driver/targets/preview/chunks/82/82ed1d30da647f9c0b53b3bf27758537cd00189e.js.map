{"version":3,"sources":["file:///C:/Users/Admin/Desktop/zgh-temp/test/gtest/ctest/xubodang/apps/client/assets/scripts/scene/HomeMgr.ts"],"names":["_decorator","Color","Component","instantiate","ParticleSystem2D","Prefab","mapH","mapW","ccclass","property","blinkInterval","HomeMgr","particleInstances","onLoad","spacing","i","particle","bg_light","getComponent","startColor","endColor","node","addChild","push","posX","posY","setPosition","start","schedule","blinkParticles","forEach","active","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAA0BC,MAAAA,W,OAAAA,W;AAAmCC,MAAAA,gB,OAAAA,gB;AAAkBC,MAAAA,M,OAAAA,M;;AAClGC,MAAAA,I,iBAAAA,I;AAAMC,MAAAA,I,iBAAAA,I;;;;;;;;;OACT;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;AAExBU,MAAAA,a,GAAiB,G,EAAI;;yBAGdC,O,WADZH,OAAO,CAAC,SAAD,C,UAEHC,QAAQ,CAACJ,MAAD,C,2BAFb,MACaM,OADb,SAC6BT,SAD7B,CACuC;AAAA;AAAA;;AAAA;;AAAA,eAGnCU,iBAHmC,GAGP,EAHO;AAAA;;AAMnCC,QAAAA,MAAM,GAAG;AACL,eAAKD,iBAAL,GAAyB,EAAzB,CADK,CACwB;;AAC7B,cAAIE,OAAO,GAAG;AAAA;AAAA,+BAAQ,KAAK,CAAb,CAAd,CAFK,CAE0B;;AAE/B,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAAE;AAC3B,gBAAMC,QAAQ,GAAGb,WAAW,CAAC,KAAKc,QAAN,CAA5B,CADyB,CACoB;AAC7C;;AACAD,YAAAA,QAAQ,CAACE,YAAT,CAAsBd,gBAAtB,EAAwCe,UAAxC,GAAqD,IAAIlB,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,CAApB,EAAuB,GAAvB,CAArD,CAHyB,CAGyD;;AAClFe,YAAAA,QAAQ,CAACE,YAAT,CAAsBd,gBAAtB,EAAwCgB,QAAxC,GAAkD,IAAInB,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,CAApB,EAAuB,CAAvB,CAAlD,CAJyB,CAIoD;;AAE7E,iBAAKoB,IAAL,CAAUC,QAAV,CAAmBN,QAAnB,EANyB,CAMK;;AAC9B,iBAAKJ,iBAAL,CAAuBW,IAAvB,CAA4BP,QAA5B,EAPyB,CAOc;AAGvC;;AACA,gBAAIQ,IAAI,GAAGV,OAAO,IAAIC,CAAC,GAAG,CAAR,CAAP,GAAoB;AAAA;AAAA,gCAAO,CAAtC,CAXyB,CAWgB;;AACzC,gBAAIU,IAAI,GAAG;AAAA;AAAA,gCAAQ,CAAnB,CAZyB,CAYH;;AACtBT,YAAAA,QAAQ,CAACU,WAAT,CAAqBF,IAArB,EAA2BC,IAA3B;AAEH;AACJ;;AAEDE,QAAAA,KAAK,GAAG;AACJ,eAAKC,QAAL,CAAc,KAAKC,cAAnB,EAAmCnB,aAAnC;AACH;;AACDmB,QAAAA,cAAc,GAAG;AACb,eAAKjB,iBAAL,CAAuBkB,OAAvB,CAAgCd,QAAD,IAAc;AACzCA,YAAAA,QAAQ,CAACe,MAAT,GAAkB,CAACf,QAAQ,CAACe,MAA5B,CADyC,CACL;AACvC,WAFD;AAGH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAvCkC,O;;;;;iBAEhB,I","sourcesContent":["import { _decorator, Color, Component, GradientRange, instantiate, Node, ParticleSystem, ParticleSystem2D, Prefab } from 'cc';\r\nimport { mapH, mapW } from '../global/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst blinkInterval =  0.5 // 闪烁间隔时间（秒）\r\n\r\n@ccclass('HomeMgr')\r\nexport class HomeMgr extends Component {\r\n    @property(Prefab)\r\n    bg_light: Prefab = null;\r\n    particleInstances: Node[] = [];\r\n    \r\n\r\n    onLoad() {\r\n        this.particleInstances = []; // 存储生成的粒子对象引用\r\n        let spacing = mapW / (10 + 1); // 计算粒子间的间距\r\n\r\n        for (let i = 0; i < 10; i++) { // 假设生成10个粒子对象\r\n            const particle = instantiate(this.bg_light); // 创建新的粒子实例\r\n            // 设置粒子颜色为金色，稍微透明\r\n            particle.getComponent(ParticleSystem2D).startColor = new Color(255, 215, 0, 0.5); // 金色，半透明\r\n            particle.getComponent(ParticleSystem2D).endColor =new Color(255, 215, 0, 0); // 金色，完全透明\r\n\r\n            this.node.addChild(particle); // 将新粒子添加到当前节点的子节点中\r\n            this.particleInstances.push(particle); // 保存粒子实例的引用\r\n            \r\n            \r\n            // 设置粒子对象的位置\r\n            let posX = spacing * (i + 1) - mapW / 2; // 计算每个粒子的X坐标位置\r\n            let posY = -mapH / 2; // 假设屏幕底部的Y坐标位置\r\n            particle.setPosition(posX, posY);\r\n            \r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.schedule(this.blinkParticles, blinkInterval);\r\n    }\r\n    blinkParticles() {\r\n        this.particleInstances.forEach((particle) => {\r\n            particle.active = !particle.active; // 切换粒子的可见性\r\n        })\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}